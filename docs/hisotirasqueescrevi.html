<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>StoryFlow - Hist√≥rias que eu escrevi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- CSS principal -->
  <link rel="stylesheet" href="css/historiasqueescrevi.css">

  <!-- Supabase client e exibi√ß√£o de usu√°rio -->
  <script type="module" src="js/supabase.js"></script>
  <script type="module" src="js/userDisplay.js"></script>

  <style>
    /* Estilo dropdown de pesquisa */
    #searchResults {
      display: none;
      position: absolute;
      background: #fff;
      border: 1px solid #ccc;
      width: 240px;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 40px;
      z-index: 9999;
    }
    .suggestion-item:hover {
      background-color: #f0f0f0;
    }
    /* Bot√µes fixos */
    .toggle-mode-button,
    .marker-button {
      position: absolute;
      top: 70px;
      padding: 10px 20px;
      background-color: rgba(0,0,0,0.9);
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    .toggle-mode-button { right: 20px; }
    .marker-button    { right: 150px; }
    .toggle-mode-button:hover,
    .marker-button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <a href="index.html"><i class="fas fa-home"></i> In√≠cio</a>
    <div class="dropdown">
      <a href="#"><i class="fas fa-pencil-alt"></i> Criar Hist√≥ria</a>
      <div class="dropdown-content">
        <a href="diario.html">Escrever Di√°rio</a>
        <a href="historia.html">Escrever Hist√≥ria</a>
      </div>
    </div>
    <div class="dropdown">
      <a href="#"><i class="fas fa-book"></i> Hist√≥rias</a>
      <div class="dropdown-content">
        <a href="historiasqueescrevi.html">Hist√≥rias que eu escrevi</a>
        <a href="VerHistorias.html">Hist√≥rias escritas</a>
      </div>
    </div>

    <!-- √Årea de usu√°rio logado -->
    <div id="userMenuArea"></div>

    <!-- Caixa de pesquisa -->
    <div class="search-box" style="position: relative;">
      <input type="text" id="searchBar" placeholder="Pesquisar...">
      <button id="searchBtn"><i class="fas fa-search"></i></button>
      <div id="searchResults"></div>
    </div>
  </div>

  <!-- Bot√µes fixos -->
  <button id="toggleMode" class="toggle-mode-button">üìù Alternar Modo</button>
  <button id="btnMarcador" class="marker-button">üìç Continuar Marcador</button>

  <!-- Formul√°rio principal -->
  <form id="formPrincipal">
    <div class="title-list">
      <div class="categoria">
        <label for="categoria">Categoria:</label>
        <select id="categoria" name="categoria">
          <!-- Carregado dinamicamente -->
        </select>
      </div>

      <label for="titulo">T√≠tulo:</label>
      <input type="text" id="titulo" name="titulo" required>

      <label for="autor">Autor:</label>
      <input type="text" id="autor" name="autor" placeholder="Seu nome (ou an√¥nimo)">

      <label for="descricao">Descri√ß√£o:</label>
      <textarea id="descricao" name="descricao" required></textarea>

      <button type="submit" class="btn">Salvar</button>
    </div>
  </form>

  <!-- Lista lateral de t√≠tulos -->
  <div id="titleListLeft" class="title-list">
    <ul id="titleListUl"></ul>
  </div>

  <!-- Container principal de leitura -->
  <div class="historia-container">
    <h1 id="historia-titulo">T√≠tulo da Hist√≥ria</h1>
    <div id="historia-conteudo" class="conteudo">
      Aqui √© onde a sua hist√≥ria ser√° exibida.
    </div>
    <div class="buttons">
      <button id="btn-voltar">‚Üê</button>
      <button id="btn-continuar">‚Üí</button>
    </div>
  </div>

  <!-- Script principal atualizado -->
  <script type="module" src="js/hisotirasqueescrevi.js"></script>
</body>
</html>
